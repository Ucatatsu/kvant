# Changelog

Все изменения проекта Квант Мессенджер.
Формат версий: KVS (Kvant Version System) — `{MAJOR}{ERA}{FEATURE}{TYPE}{PATCH}`

---

## [1A7a1] - 2025-12-15

### Добавлено
- Контекстное меню сообщений открывается по тапу на мобильных (не по зажатию)
- Кнопка "Выйти" в навигации настроек на мобильных
- Кастомные обои теперь синхронизируются с аккаунтом

### Исправлено
- Контекстное меню теперь поверх всех элементов (z-index: 10000)
- Звук и громкость теперь локальные настройки (не синхронизируются)
- Убрана лишняя анимация прокрутки чата

### Изменено
- Сайдбар уходит влево с плавной анимацией

---

## [1A7a0] - 2025-12-15

### Добавлено
- Тотальная мобильная адаптация
- Плавная анимация перехода сайдбар ↔ чат (slide effect)
- Haptic feedback (вибрация) при выборе чата
- Улучшенные touch-эффекты для кнопок и элементов
- Поддержка safe-area для устройств с вырезом

### Оптимизировано
- Electric border эффект переписан на CSS (без тяжёлых SVG фильтров)
- Производительность анимаций на мобильных
- Размеры touch-целей (минимум 44px)
- Предотвращение зума при фокусе на input (iOS)

---

## [1A6a2] - 2025-12-15

### Добавлено
- Кроппер для обоев с фиксированным соотношением 16:9
- Сетка 3x3 для удобного позиционирования
- Ручки по углам для изменения размера (с сохранением пропорций)
- Поддержка drag & touch для перемещения и ресайза

### Исправлено
- Перемещение кроппера теперь работает по всей области изображения
- Фото теперь открывается с первого раза (сброс input при клике)
- Координаты перетаскивания относительно изображения

---

## [1A5r5] - 2025-12-15

### Исправлено
- Кнопки мут/камера в звонках корректно переключают SVG иконки
- Работа attach/emoji кнопок в группах, каналах и серверах
- Убрано дублирование Premium badge (удалён CSS ::after)
- Аватарки больше не накладываются в заголовке чата

### Изменено
- Кнопки expand/compress фона заменены на SVG иконки
- Обновлены togglePanelMic/togglePanelCam для работы с SVG
- Premium+ добавлен в админ-панель

---

## [1A5r4] - 2025-12-15

### Исправлено
- Класс dock-img для корректного отображения иконок
- updateChatHeader очищает backgroundImage перед установкой аватара

---

## [1A5r3] - 2025-12-15

### Изменено
- Заменены все эмодзи в dock-панели на SVG иконки
- Заменены эмодзи в табах создания (группа, канал, сервер)
- Premium индикаторы используют dimond.svg
- Обновлены empty states для групп, каналов, серверов

### Добавлено
- Иконки: megaphone, Castle, badge-dollar, dimond, dimond-plus
- CSS стили для dock-icon, empty-tab-icon, create-tab

---

## [1A5r2] - 2025-12-15

### Изменено
- Заменены все эмодзи в настройках на SVG иконки
- Кнопка "Выйти" → иконка power
- Кнопка "Админ-панель" → иконка Badge-check
- Исправлена иконка уведомлений в контекстном меню

### Добавлено
- Иконки: pencil-paintbrush, message, messenga-lock, messenge-question, messenge-info

---

## [1A5r1] - 2025-12-15

### Изменено
- Интегрированы SVG иконки вместо эмодзи для основного интерфейса
- Улучшена производительность за счёт кэширования иконок в Service Worker

### Добавлено
- 40+ SVG иконок для интерфейса
- CSS стили для SVG иконок с фильтрами цвета

---

## [1A5h0] - 2025-12-15

### Исправлено
- Проблема со звонками: обновлены TURN серверы для NAT traversal
- Удалён мёртвый код обработчиков `.action-btn`

### Добавлено
- Расширенное логирование WebRTC для отладки
- Улучшенная обработка ошибок при звонках
