<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="description" content="–ö–≤–∞–Ω—Ç - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∞—É–¥–∏–æ –∏ –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–æ–≤">
  <meta name="theme-color" content="#0a1628">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>–ö–≤–∞–Ω—Ç</title>
  <link rel="icon" href="icon.png" type="image/png">
  <link rel="apple-touch-icon" href="icon.png">
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Skip link –¥–ª—è accessibility -->
  <a href="#main-content" class="skip-link">–ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É</a>
  
  <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è -->
  <div id="connection-status" class="connection-status hidden" role="status" aria-live="polite"></div>

  <!-- –≠–∫—Ä–∞–Ω –≤—Ö–æ–¥–∞ -->
  <div id="login-screen" class="screen" role="main">
    <div class="auth-container">
      <img src="icon.png" alt="–õ–æ–≥–æ—Ç–∏–ø –ö–≤–∞–Ω—Ç" class="logo-img">
      <h1>–ö–≤–∞–Ω—Ç</h1>
      <form id="login-form" aria-label="–§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞">
        <input type="text" id="login-username" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" required 
               autocomplete="username" aria-label="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
        <input type="password" id="login-password" placeholder="–ü–∞—Ä–æ–ª—å" required 
               autocomplete="current-password" aria-label="–ü–∞—Ä–æ–ª—å">
        <button type="submit" class="btn-primary">–í–æ–π—Ç–∏</button>
        <button type="button" id="to-register-btn" class="btn-secondary">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
      </form>
      <p id="login-error" class="error" role="alert" aria-live="polite"></p>
    </div>
  </div>

  <!-- –≠–∫—Ä–∞–Ω —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
  <div id="register-screen" class="screen hidden" role="main">
    <div class="auth-container">
      <img src="icon.png" alt="–õ–æ–≥–æ—Ç–∏–ø –ö–≤–∞–Ω—Ç" class="logo-img">
      <h1>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h1>
      <form id="register-form" aria-label="–§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏">
        <input type="text" id="reg-username" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" required 
               autocomplete="username" aria-label="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" 
               pattern="[a-zA-Z0-9_]{3,20}" title="3-20 —Å–∏–º–≤–æ–ª–æ–≤: –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã, _">
        <input type="password" id="reg-password" placeholder="–ü–∞—Ä–æ–ª—å" required 
               autocomplete="new-password" aria-label="–ü–∞—Ä–æ–ª—å" minlength="6">
        <input type="password" id="reg-password-confirm" placeholder="–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" required 
               autocomplete="new-password" aria-label="–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è">
        <button type="submit" class="btn-primary">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
        <button type="button" id="to-login-btn" class="btn-secondary">–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
      </form>
      <p class="legal-notice">
        –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—è—Å—å, –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å 
        <a href="#" class="legal-link" data-doc="terms">–£—Å–ª–æ–≤–∏—è–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</a> –∏ 
        <a href="#" class="legal-link" data-doc="privacy">–ü–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>
      </p>
      <p id="register-error" class="error" role="alert" aria-live="polite"></p>
    </div>
  </div>

  <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω —á–∞—Ç–∞ -->
  <div id="chat-screen" class="screen hidden" id="main-content">
    <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
    <aside class="sidebar" role="navigation" aria-label="–ö–æ–Ω—Ç–∞–∫—Ç—ã">
      <div class="sidebar-header">
        <img src="icon.png" alt="–ö–≤–∞–Ω—Ç" class="logo-mini-img">
        <button class="global-search-btn" id="global-search-btn" title="–ü–æ–∏—Å–∫" aria-label="–ì–ª–æ–±–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫">
          üîç
        </button>
      </div>
      <div class="users-list" id="users-list" role="list" aria-label="–°–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤"></div>
      <div class="sidebar-footer" id="user-panel" role="button" tabindex="0" aria-label="–û—Ç–∫—Ä—ã—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É –ø—Ä–æ—Ñ–∏–ª—è">
        <div class="current-user-avatar" id="current-user-avatar"></div>
        <div class="current-user-details">
          <span class="current-user"></span>
          <span class="current-user-status" id="current-user-status">
            <span class="status-dot online"></span>
            <span class="status-text">–í —Å–µ—Ç–∏</span>
          </span>
        </div>
        <div class="user-panel-actions">
          <button class="panel-action-btn" id="panel-mic-btn" title="–ú–∏–∫—Ä–æ—Ñ–æ–Ω" aria-label="–ú–∏–∫—Ä–æ—Ñ–æ–Ω">üé§</button>
          <button class="panel-action-btn" id="panel-cam-btn" title="–ö–∞–º–µ—Ä–∞" aria-label="–ö–∞–º–µ—Ä–∞">üìπ</button>
        </div>
      </div>
      
      <!-- Popup –∫–∞—Ä—Ç–æ—á–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
      <div class="user-card-popup hidden" id="user-card-popup">
        <div class="user-card-banner" id="user-card-banner"></div>
        <div class="user-card-avatar" id="user-card-avatar"></div>
        <button class="user-card-settings" id="user-card-settings" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">‚öôÔ∏è</button>
        <div class="user-card-body">
          <div class="user-card-name" id="user-card-name"></div>
          <div class="user-card-status-selector" id="status-selector">
            <div class="status-current" id="status-current">
              <span class="status-dot online" id="status-dot"></span>
              <span class="status-text" id="status-text">–í —Å–µ—Ç–∏</span>
              <span class="status-arrow">‚ñº</span>
            </div>
            <div class="status-dropdown hidden" id="status-dropdown">
              <div class="status-option" data-status="online">
                <span class="status-dot online"></span>
                <span>–í —Å–µ—Ç–∏</span>
              </div>
              <div class="status-option" data-status="idle">
                <span class="status-dot idle"></span>
                <span>–ù–µ–∞–∫—Ç–∏–≤–µ–Ω</span>
              </div>
              <div class="status-option" data-status="dnd">
                <span class="status-dot dnd"></span>
                <span>–ù–µ –±–µ—Å–ø–æ–∫–æ–∏—Ç—å</span>
              </div>
              <div class="status-option" data-status="invisible">
                <span class="status-dot invisible"></span>
                <span>–ù–µ–≤–∏–¥–∏–º—ã–π</span>
              </div>
            </div>
          </div>
          <div class="user-card-bio" id="user-card-bio"></div>
          <button class="user-card-profile-btn" id="user-card-profile-btn">–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</button>
        </div>
      </div>
    </aside>
    
    <!-- Resizer –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —à–∏—Ä–∏–Ω—ã sidebar -->
    <div class="sidebar-resizer" id="sidebar-resizer"></div>
    
    <!-- –û–±–ª–∞—Å—Ç—å —á–∞—Ç–∞ -->
    <header class="chat-header" id="chat-header">
      <button class="back-btn" id="back-btn" aria-label="–ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É —á–∞—Ç–æ–≤">‚Üê</button>
      
      <!-- Pill-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ —Ü–µ–Ω—Ç—Ä—É -->
      <div class="chat-header-pill" id="chat-user-info-btn" role="button" tabindex="0" 
           aria-label="–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–µ">
        <div class="chat-header-avatar" id="chat-header-avatar"></div>
        <div class="chat-header-info">
          <span class="chat-user-name">–í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Ç</span>
          <span class="chat-user-status"></span>
        </div>
        <div class="chat-header-actions">
          <button class="header-action-btn" title="–ê—É–¥–∏–æ–∑–≤–æ–Ω–æ–∫" aria-label="–ù–∞—á–∞—Ç—å –∞—É–¥–∏–æ–∑–≤–æ–Ω–æ–∫">üìû</button>
          <button class="header-action-btn" title="–í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫" aria-label="–ù–∞—á–∞—Ç—å –≤–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫">üìπ</button>
          <button class="header-action-btn header-menu-btn" title="–ú–µ–Ω—é" aria-label="–ú–µ–Ω—é">‚ãÆ</button>
        </div>
      </div>
    </header>
    
    <!-- –ü–æ–ª–æ—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∑–≤–æ–Ω–∫–∞ -->
    <div class="active-call-bar hidden" id="active-call-bar" role="status">
      <div class="call-bar-info">
        <span class="call-bar-icon">üìû</span>
        <span class="call-bar-text">–ó–≤–æ–Ω–æ–∫</span>
        <span class="call-bar-name" id="call-bar-name"></span>
        <span class="call-bar-timer" id="call-bar-timer">00:00</span>
      </div>
      <div class="call-bar-actions">
        <button class="call-bar-btn" id="call-bar-expand" title="–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å" aria-label="–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∑–≤–æ–Ω–æ–∫">‚ÜóÔ∏è</button>
        <button class="call-bar-btn call-bar-end" id="call-bar-end" title="–ó–∞–≤–µ—Ä—à–∏—Ç—å" aria-label="–ó–∞–≤–µ—Ä—à–∏—Ç—å –∑–≤–æ–Ω–æ–∫">‚úï</button>
      </div>
    </div>
    
    <main class="messages" id="messages" role="log" aria-label="–°–æ–æ–±—â–µ–Ω–∏—è" aria-live="polite"></main>
    
    <form class="message-form" id="message-form" aria-label="–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è">
      <button type="button" class="attach-btn" id="attach-btn" aria-label="–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª" title="–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª">üìé</button>
      <input type="file" id="attach-input" accept="image/*,video/mp4,.gif" hidden aria-hidden="true">
      <input type="text" id="message-input" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ..." autocomplete="off" 
             disabled aria-label="–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è">
      <button type="button" class="emoji-btn" aria-label="–í—ã–±—Ä–∞—Ç—å —ç–º–æ–¥–∑–∏" aria-haspopup="true">üòä</button>
      <button type="submit" class="send-btn" disabled aria-label="–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ">‚û§</button>
    </form>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Ñ–∏–ª—è -->
  <div id="profile-modal" class="modal hidden" role="dialog" aria-labelledby="profile-name" aria-modal="true">
    <div class="modal-overlay"></div>
    <div class="modal-content profile-modal-content">
      <div class="profile-banner" id="profile-banner"></div>
      <div class="profile-avatar-wrapper">
        <div class="profile-avatar-large" id="profile-avatar"></div>
      </div>
      <button class="modal-close" id="close-profile" aria-label="–ó–∞–∫—Ä—ã—Ç—å">&times;</button>
      <div class="profile-body">
        <div class="profile-name-row">
          <div class="profile-name" id="profile-name"></div>
          <div class="profile-badges" id="profile-badges"></div>
        </div>
        <div class="profile-username" id="profile-username"></div>
        <div class="profile-tag" id="profile-tag"></div>
        <div class="profile-bio" id="profile-bio"></div>
        <div class="profile-actions">
          <button class="btn-primary" id="edit-profile-btn">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
        </div>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è -->
  <div id="edit-profile-modal" class="modal hidden" role="dialog" aria-labelledby="edit-profile-title" aria-modal="true">
    <div class="modal-overlay"></div>
    <div class="modal-content edit-profile-content">
      <div class="modal-header">
        <h2 id="edit-profile-title">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</h2>
        <button class="modal-close" id="close-edit-profile" aria-label="–ó–∞–∫—Ä—ã—Ç—å">&times;</button>
      </div>
      <div class="modal-body">
        <div class="edit-banner-wrapper">
          <div class="edit-banner" id="edit-banner-preview" role="button" tabindex="0" 
               aria-label="–ò–∑–º–µ–Ω–∏—Ç—å –±–∞–Ω–Ω–µ—Ä">
            <span class="edit-banner-text">–ù–∞–∂–º–∏—Ç–µ —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å –±–∞–Ω–Ω–µ—Ä</span>
          </div>
          <input type="file" id="edit-banner-input" accept="image/*,.gif,.mp4,video/mp4" hidden aria-hidden="true">
        </div>
        
        <div class="edit-avatar-wrapper">
          <div class="edit-avatar" id="edit-avatar-preview" role="button" tabindex="0" 
               aria-label="–ò–∑–º–µ–Ω–∏—Ç—å —Ñ–æ—Ç–æ">
            <span class="edit-avatar-icon">üì∑</span>
          </div>
          <input type="file" id="edit-avatar-input" accept="image/*,.gif,.mp4,video/mp4" hidden aria-hidden="true">
          <span class="edit-avatar-hint">–ò–∑–º–µ–Ω–∏—Ç—å —Ñ–æ—Ç–æ</span>
          <span class="edit-premium-hint" id="avatar-premium-hint"></span>
        </div>
        
        <div class="form-group">
          <label for="edit-username">–ù–∏–∫ (username)</label>
          <input type="text" id="edit-username" placeholder="your_username" 
                 pattern="[a-zA-Z0-9_]{3,20}">
          <span class="form-hint" id="username-hint"></span>
        </div>
        <div class="form-group">
          <label for="edit-display-name">–û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è</label>
          <input type="text" id="edit-display-name" placeholder="–í–∞—à–µ –∏–º—è" maxlength="50">
        </div>
        <div class="form-group">
          <label for="edit-bio">–û —Å–µ–±–µ</label>
          <textarea id="edit-bio" placeholder="–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–µ–±–µ..." rows="3" maxlength="500"></textarea>
        </div>
        
        <!-- Premium –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ -->
        <div class="premium-settings-section" id="premium-settings-section">
          <div class="premium-settings-title">üëë Premium –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</div>
          <div class="premium-lock-overlay hidden" id="premium-lock-overlay">
            <div class="premium-lock-content">
              <span class="premium-lock-icon">üîí</span>
              <span class="premium-lock-text">–ù—É–∂–µ–Ω Premium</span>
            </div>
          </div>
          
          <div class="premium-settings-content" id="premium-settings-content">
            <div class="color-picker-row">
              <label for="edit-name-color">–¶–≤–µ—Ç –Ω–∏–∫–∞ –≤ —á–∞—Ç–µ</label>
              <input type="color" id="edit-name-color" value="#4fc3f7">
              <button class="btn-small" id="reset-name-color" title="–°–±—Ä–æ—Å–∏—Ç—å">‚úï</button>
            </div>
            
            <div class="color-picker-row">
              <label for="edit-profile-color">–¶–≤–µ—Ç —Ñ–æ–Ω–∞ –ø—Ä–æ—Ñ–∏–ª—è</label>
              <input type="color" id="edit-profile-color" value="#1976d2">
              <button class="btn-small" id="reset-profile-color" title="–°–±—Ä–æ—Å–∏—Ç—å">‚úï</button>
            </div>
            
            <div class="form-group">
              <label for="edit-custom-tag">–ö–∞—Å—Ç–æ–º–Ω—ã–π —Ç–µ–≥</label>
              <input type="text" id="edit-custom-tag" placeholder="your_tag" 
                     pattern="[a-zA-Z0-9_]{2,20}" maxlength="20">
              <span class="form-hint">2-20 —Å–∏–º–≤–æ–ª–æ–≤, –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã –∏ _</span>
            </div>
          </div>
        </div>
        
        <button class="btn-primary" id="save-profile-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
  <div id="settings-modal" class="modal hidden" role="dialog" aria-labelledby="settings-title" aria-modal="true">
    <div class="modal-overlay"></div>
    <div class="modal-content settings-modal-content">
      <div class="settings-sidebar">
        <div class="settings-user">
          <div class="settings-user-avatar" id="settings-avatar"></div>
          <div class="settings-user-info">
            <span class="settings-user-name" id="settings-username"></span>
            <span class="settings-user-status">–í —Å–µ—Ç–∏</span>
          </div>
        </div>
        
        <nav class="settings-nav" aria-label="–†–∞–∑–¥–µ–ª—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫">
          <div class="settings-nav-item active" data-section="appearance" role="tab" tabindex="0">
            <span class="nav-icon" aria-hidden="true">üé®</span>
            <span>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</span>
          </div>
          <div class="settings-nav-item" data-section="notifications" role="tab" tabindex="0">
            <span class="nav-icon" aria-hidden="true">üîî</span>
            <span>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
          </div>
          <div class="settings-nav-item" data-section="privacy" role="tab" tabindex="0">
            <span class="nav-icon" aria-hidden="true">üîí</span>
            <span>–ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å</span>
          </div>
          <div class="settings-nav-item" data-section="about" role="tab" tabindex="0">
            <span class="nav-icon" aria-hidden="true">‚ÑπÔ∏è</span>
            <span>–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</span>
          </div>
        </nav>
        
        <div class="settings-sidebar-footer">
          <button class="settings-admin-btn hidden" id="admin-btn">
            üëë –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
          </button>
          <button class="settings-logout-btn" id="logout-btn">
            –í—ã–π—Ç–∏
          </button>
        </div>
      </div>
      
      <div class="settings-content">
        <button class="modal-close" id="close-settings" aria-label="–ó–∞–∫—Ä—ã—Ç—å">&times;</button>
        
        <!-- –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ -->
        <section class="settings-section active" id="section-appearance" role="tabpanel">
          <h2 id="settings-title">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</h2>
          
          <div class="settings-group">
            <h3>–¢–µ–º–∞</h3>
            <div class="theme-selector" role="radiogroup" aria-label="–í—ã–±–æ—Ä —Ç–µ–º—ã">
              <div class="theme-option active" data-theme="dark" role="radio" tabindex="0" aria-checked="true">
                <div class="theme-preview dark"></div>
                <span>–¢—ë–º–Ω–∞—è</span>
              </div>
              <div class="theme-option" data-theme="light" role="radio" tabindex="0" aria-checked="false">
                <div class="theme-preview light"></div>
                <span>–°–≤–µ—Ç–ª–∞—è</span>
              </div>
              <div class="theme-option" data-theme="system" role="radio" tabindex="0" aria-checked="false">
                <div class="theme-preview system"></div>
                <span>–°–∏—Å—Ç–µ–º–Ω–∞—è</span>
              </div>
              <div class="theme-option premium-theme" data-theme="neon" role="radio" tabindex="0" aria-checked="false">
                <div class="theme-preview neon"></div>
                <span>–ù–µ–æ–Ω</span>
              </div>
              <div class="theme-option premium-theme" data-theme="sunset" role="radio" tabindex="0" aria-checked="false">
                <div class="theme-preview sunset"></div>
                <span>–ó–∞–∫–∞—Ç</span>
              </div>
              <div class="theme-option premium-theme" data-theme="ocean" role="radio" tabindex="0" aria-checked="false">
                <div class="theme-preview ocean"></div>
                <span>–û–∫–µ–∞–Ω</span>
              </div>
            </div>
          </div>
          
          <div class="settings-group">
            <h3>–§–æ–Ω —á–∞—Ç–∞</h3>
            <div class="bg-selector" role="radiogroup" aria-label="–í—ã–±–æ—Ä —Ñ–æ–Ω–∞">
              <div class="bg-option active" data-bg="default" role="radio" tabindex="0" aria-checked="true">
                <div class="bg-preview" style="background: url('background.jpg') center/cover"></div>
              </div>
              <div class="bg-option" data-bg="gradient1" role="radio" tabindex="0" aria-checked="false">
                <div class="bg-preview" style="background: linear-gradient(135deg, #1a1a2e, #16213e)"></div>
              </div>
              <div class="bg-option" data-bg="gradient2" role="radio" tabindex="0" aria-checked="false">
                <div class="bg-preview" style="background: linear-gradient(135deg, #0f0c29, #302b63, #24243e)"></div>
              </div>
              <div class="bg-option" data-bg="gradient3" role="radio" tabindex="0" aria-checked="false">
                <div class="bg-preview" style="background: linear-gradient(135deg, #232526, #414345)"></div>
              </div>
              <div class="bg-option" data-bg="solid" role="radio" tabindex="0" aria-checked="false">
                <div class="bg-preview" style="background: #0a1628"></div>
              </div>
              <div class="bg-option" data-bg="custom" role="radio" tabindex="0" aria-checked="false">
                <div class="bg-preview custom-bg">üì∑</div>
                <input type="file" id="custom-bg-input" accept="image/*" hidden aria-hidden="true">
              </div>
            </div>
          </div>
          
          <div class="settings-group">
            <h3>–†–∞–∑–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π</h3>
            <div class="settings-item">
              <div class="settings-item-info">
                <span class="settings-item-title">–†–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞</span>
              </div>
              <div class="size-selector" role="radiogroup" aria-label="–†–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞">
                <button class="size-btn" data-size="small" aria-label="–ú–∞–ª–µ–Ω—å–∫–∏–π">A</button>
                <button class="size-btn active" data-size="medium" aria-label="–°—Ä–µ–¥–Ω–∏–π">A</button>
                <button class="size-btn" data-size="large" aria-label="–ë–æ–ª—å—à–æ–π">A</button>
              </div>
            </div>
          </div>
          
          <div class="settings-group">
            <h3>–ê–∫—Ü–µ–Ω—Ç–Ω—ã–π —Ü–≤–µ—Ç</h3>
            <div class="color-selector" role="radiogroup" aria-label="–ê–∫—Ü–µ–Ω—Ç–Ω—ã–π —Ü–≤–µ—Ç">
              <div class="color-option active" data-color="#4fc3f7" style="background: #4fc3f7" 
                   role="radio" tabindex="0" aria-label="–ì–æ–ª—É–±–æ–π"></div>
              <div class="color-option" data-color="#7c4dff" style="background: #7c4dff" 
                   role="radio" tabindex="0" aria-label="–§–∏–æ–ª–µ—Ç–æ–≤—ã–π"></div>
              <div class="color-option" data-color="#ff4081" style="background: #ff4081" 
                   role="radio" tabindex="0" aria-label="–†–æ–∑–æ–≤—ã–π"></div>
              <div class="color-option" data-color="#00e676" style="background: #00e676" 
                   role="radio" tabindex="0" aria-label="–ó–µ–ª—ë–Ω—ã–π"></div>
              <div class="color-option" data-color="#ffab00" style="background: #ffab00" 
                   role="radio" tabindex="0" aria-label="–û—Ä–∞–Ω–∂–µ–≤—ã–π"></div>
              <div class="color-option" data-color="#ff5722" style="background: #ff5722" 
                   role="radio" tabindex="0" aria-label="–ö—Ä–∞—Å–Ω—ã–π"></div>
            </div>
          </div>
          
          <div class="settings-group">
            <div class="settings-item">
              <div class="settings-item-info">
                <span class="settings-item-title">–ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ä–µ–∂–∏–º</span>
                <span class="settings-item-desc">–£–º–µ–Ω—å—à–∏—Ç—å –æ—Ç—Å—Ç—É–ø—ã –º–µ–∂–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏</span>
              </div>
              <label class="toggle">
                <input type="checkbox" id="setting-compact">
                <span class="toggle-slider"></span>
              </label>
            </div>
            <div class="settings-item">
              <div class="settings-item-info">
                <span class="settings-item-title">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∞–≤–∞—Ç–∞—Ä–∫–∏</span>
                <span class="settings-item-desc">–û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –∞–≤–∞—Ç–∞—Ä–∫–∏ –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö</span>
              </div>
              <label class="toggle">
                <input type="checkbox" id="setting-avatars" checked>
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>
        </section>
        
        <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
        <section class="settings-section" id="section-notifications" role="tabpanel">
          <h2>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h2>
          <div class="settings-group">
            <div class="settings-item">
              <div class="settings-item-info">
                <span class="settings-item-title">Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
                <span class="settings-item-desc">–ü–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö</span>
              </div>
              <label class="toggle">
                <input type="checkbox" id="notifications-checkbox" checked>
                <span class="toggle-slider"></span>
              </label>
            </div>
            <div class="settings-item">
              <div class="settings-item-info">
                <span class="settings-item-title">–ó–≤—É–∫–∏</span>
                <span class="settings-item-desc">–ó–≤—É–∫–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
              </div>
              <label class="toggle">
                <input type="checkbox" id="sounds-checkbox" checked>
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>
        </section>
        
        <!-- –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å -->
        <section class="settings-section" id="section-privacy" role="tabpanel">
          <h2>–ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å</h2>
          <div class="settings-group">
            <div class="settings-item">
              <div class="settings-item-info">
                <span class="settings-item-title">–°—Ç–∞—Ç—É—Å –æ–Ω–ª–∞–π–Ω</span>
                <span class="settings-item-desc">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–≥–¥–∞ –≤—ã –≤ —Å–µ—Ç–∏</span>
              </div>
              <label class="toggle">
                <input type="checkbox" id="setting-online-status" checked>
                <span class="toggle-slider"></span>
              </label>
            </div>
            <div class="settings-item">
              <div class="settings-item-info">
                <span class="settings-item-title">–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞–±–æ—Ä–∞</span>
                <span class="settings-item-desc">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–≥–¥–∞ –≤—ã –ø–µ—á–∞—Ç–∞–µ—Ç–µ</span>
              </div>
              <label class="toggle">
                <input type="checkbox" id="setting-typing" checked>
                <span class="toggle-slider"></span>
              </label>
            </div>
            <div class="settings-item premium-only" id="hide-online-setting">
              <span class="premium-badge-inline">üëë Premium</span>
              <div class="settings-item-info">
                <span class="settings-item-title">–°–∫—Ä—ã—Ç—ã–π –æ–Ω–ª–∞–π–Ω</span>
                <span class="settings-item-desc">–í—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è –æ—Ñ—Ñ–ª–∞–π–Ω –¥–ª—è –¥—Ä—É–≥–∏—Ö</span>
              </div>
              <label class="toggle">
                <input type="checkbox" id="setting-hide-online">
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>
        </section>
        
        <!-- –û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ -->
        <section class="settings-section" id="section-about" role="tabpanel">
          <h2>–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</h2>
          <div class="about-content">
            <img src="icon.png" alt="–ö–≤–∞–Ω—Ç" class="about-logo">
            <h3>–ö–≤–∞–Ω—Ç</h3>
            <p class="about-version">–í–µ—Ä—Å–∏—è 1.5.0</p>
            <p class="about-desc">–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä —Å —á–∏—Å—Ç—ã–º —Å—Ç–∏–ª–µ–º</p>
            <div class="about-links">
              <a href="#" class="legal-link about-link" data-doc="terms">üìÑ –£—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</a>
              <a href="#" class="legal-link about-link" data-doc="privacy">üîí –ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>
            </div>
            <p class="about-copyright">¬© 2025 –ö–≤–∞–Ω—Ç. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
          </div>
        </section>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Ñ–∏–ª—è —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞ -->
  <div id="user-profile-modal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modal-overlay"></div>
    <div class="modal-content profile-modal-content">
      <div class="profile-banner" id="user-profile-banner"></div>
      <div class="profile-avatar-wrapper">
        <div class="profile-avatar-large" id="user-profile-avatar"></div>
      </div>
      <button class="modal-close" id="close-user-profile" aria-label="–ó–∞–∫—Ä—ã—Ç—å">&times;</button>
      <div class="profile-body">
        <div class="profile-name-row">
          <div class="profile-name" id="user-profile-name"></div>
          <div class="profile-badges" id="user-profile-badges"></div>
        </div>
        <div class="profile-username" id="user-profile-username"></div>
        <div class="profile-tag" id="user-profile-tag"></div>
        <div class="profile-bio" id="user-profile-bio"></div>
      </div>
    </div>
  </div>

  <!-- Emoji Picker -->
  <div id="emoji-picker" class="emoji-picker hidden" role="dialog" aria-label="–í—ã–±–æ—Ä —ç–º–æ–¥–∑–∏">
    <div class="emoji-grid" role="listbox"></div>
  </div>

  <!-- –ú–æ–¥–∞–ª–∫–∞ –∑–≤–æ–Ω–∫–∞ -->
  <div id="call-modal" class="modal hidden" role="dialog" aria-label="–ó–≤–æ–Ω–æ–∫" aria-modal="true">
    <div class="modal-overlay call-overlay"></div>
    <div class="call-container">
      <div class="call-user-avatar" id="call-avatar"></div>
      <div class="call-user-name" id="call-name"></div>
      <div class="call-status" id="call-status" role="status">–í—ã–∑–æ–≤...</div>
      <div class="call-timer hidden" id="call-timer" aria-live="polite">00:00</div>
      <div class="call-videos hidden" id="call-videos">
        <video id="remote-video" autoplay playsinline aria-label="–í–∏–¥–µ–æ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞"></video>
        <video id="local-video" autoplay playsinline muted aria-label="–í–∞—à–µ –≤–∏–¥–µ–æ"></video>
      </div>
      <div class="call-actions">
        <button class="call-btn call-btn-mute active" id="mute-btn" title="–ú–∏–∫—Ä–æ—Ñ–æ–Ω" aria-label="–í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –º–∏–∫—Ä–æ—Ñ–æ–Ω">üé§</button>
        <button class="call-btn call-btn-video" id="toggle-video-btn" title="–ö–∞–º–µ—Ä–∞" aria-label="–í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –∫–∞–º–µ—Ä—É">üìπ</button>
        <button class="call-btn call-btn-screen" id="screen-share-btn" title="–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è" aria-label="–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —ç–∫—Ä–∞–Ω–∞">üñ•Ô∏è</button>
        <button class="call-btn call-btn-end" id="end-call-btn" title="–ó–∞–≤–µ—Ä—à–∏—Ç—å" aria-label="–ó–∞–≤–µ—Ä—à–∏—Ç—å –∑–≤–æ–Ω–æ–∫">üìµ</button>
      </div>
    </div>
  </div>

  <!-- –í—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫ -->
  <div id="incoming-call-modal" class="modal hidden" role="alertdialog" aria-label="–í—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫" aria-modal="true">
    <div class="modal-overlay call-overlay"></div>
    <div class="call-container incoming">
      <div class="call-user-avatar" id="incoming-call-avatar"></div>
      <div class="call-user-name" id="incoming-call-name"></div>
      <div class="call-status" id="incoming-call-type" role="status">–í—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫...</div>
      <div class="call-actions">
        <button class="call-btn call-btn-decline" id="decline-call-btn" aria-label="–û—Ç–∫–ª–æ–Ω–∏—Ç—å –∑–≤–æ–Ω–æ–∫">‚úï</button>
        <button class="call-btn call-btn-accept" id="accept-call-btn" aria-label="–ü—Ä–∏–Ω—è—Ç—å –∑–≤–æ–Ω–æ–∫">üìû</button>
      </div>
    </div>
  </div>

  <!-- –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å -->
  <div id="admin-modal" class="modal hidden" role="dialog" aria-label="–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å" aria-modal="true">
    <div class="modal-overlay"></div>
    <div class="modal-content admin-content">
      <div class="modal-header">
        <h2>üëë –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h2>
        <button class="modal-close" id="close-admin" aria-label="–ó–∞–∫—Ä—ã—Ç—å">&times;</button>
      </div>
      <div class="admin-body">
        <div class="admin-stats" id="admin-stats"></div>
        <div class="admin-search">
          <input type="text" id="admin-search" placeholder="–ü–æ–∏—Å–∫ –ø–æ username –∏–ª–∏ ID...">
        </div>
        <div class="admin-users" id="admin-users"></div>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª–∫–∞ –ø—Ä–∞–≤–æ–≤—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ -->
  <div id="legal-modal" class="modal hidden" role="dialog" aria-label="–î–æ–∫—É–º–µ–Ω—Ç" aria-modal="true">
    <div class="modal-overlay"></div>
    <div class="modal-content legal-modal-content">
      <div class="modal-header">
        <h2 id="legal-title">–î–æ–∫—É–º–µ–Ω—Ç</h2>
        <button class="modal-close" id="close-legal" aria-label="–ó–∞–∫—Ä—ã—Ç—å">&times;</button>
      </div>
      <div class="legal-body" id="legal-body">
        <div class="legal-loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª–∫–∞ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ -->
  <div id="search-modal" class="modal hidden" role="dialog" aria-label="–ü–æ–∏—Å–∫" aria-modal="true">
    <div class="modal-overlay"></div>
    <div class="search-modal-content">
      <div class="search-input-wrapper">
        <span class="search-icon">üîç</span>
        <input type="text" id="global-search-input" placeholder="–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Å–æ–æ–±—â–µ–Ω–∏–π..." 
               autocomplete="off" autofocus>
        <button class="search-close-btn" id="close-search" aria-label="–ó–∞–∫—Ä—ã—Ç—å">‚úï</button>
      </div>
      <div class="search-results" id="search-results">
        <div class="search-empty">
          <div class="search-empty-text">–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –¥–ª—è –ø–æ–∏—Å–∫–∞</div>
        </div>
      </div>
    </div>
  </div>

  <!-- –ö–∞—Å—Ç–æ–º–Ω–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è -->
  <!-- –ö–∞—Å—Ç–æ–º–Ω–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è -->
  <div id="confirm-modal" class="modal hidden" role="alertdialog" aria-modal="true">
    <div class="modal-overlay"></div>
    <div class="confirm-modal-content">
      <div class="confirm-icon" id="confirm-icon">‚ö†Ô∏è</div>
      <h3 class="confirm-title" id="confirm-title">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</h3>
      <p class="confirm-message" id="confirm-message">–í—ã —É–≤–µ—Ä–µ–Ω—ã?</p>
      <div class="confirm-actions">
        <button class="confirm-btn confirm-cancel" id="confirm-cancel">–û—Ç–º–µ–Ω–∞</button>
        <button class="confirm-btn confirm-ok" id="confirm-ok">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- –ö–∞—Å—Ç–æ–º–Ω–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤–≤–æ–¥–∞ -->
  <div id="prompt-modal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modal-overlay"></div>
    <div class="prompt-modal-content">
      <div class="prompt-icon" id="prompt-icon">‚úèÔ∏è</div>
      <h3 class="prompt-title" id="prompt-title">–í–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ</h3>
      <p class="prompt-message" id="prompt-message"></p>
      <input type="text" class="prompt-input" id="prompt-input" autocomplete="off">
      <div class="prompt-actions">
        <button class="prompt-btn prompt-cancel" id="prompt-cancel">–û—Ç–º–µ–Ω–∞</button>
        <button class="prompt-btn prompt-ok" id="prompt-ok">OK</button>
      </div>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="app.js"></script>
</body>
</html>
