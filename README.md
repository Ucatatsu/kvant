# –ö–≤–∞–Ω—Ç ‚Äî –ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä

–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∞—É–¥–∏–æ –∏ –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–æ–≤.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üí¨ –û–±–º–µ–Ω —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üìû –ê—É–¥–∏–æ–∑–≤–æ–Ω–∫–∏ (WebRTC)
- üìπ –í–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∏ (WebRTC)
- üñ•Ô∏è –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —ç–∫—Ä–∞–Ω–∞
- üîî Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- üë§ –ü—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∞–≤–∞—Ç–∞—Ä–∞–º–∏ –∏ –±–∞–Ω–Ω–µ—Ä–∞–º–∏
- üé® –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (—Ç–µ–º—ã, —Ü–≤–µ—Ç–∞, —Ñ–æ–Ω—ã)
- üì± –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω (PWA)
- üîí JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

### –°–µ—Ä–≤–µ—Ä
- Node.js + Express
- PostgreSQL
- Socket.IO
- WebRTC —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏—è
- JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- Helmet + Rate Limiting

### Web-–∫–ª–∏–µ–Ω—Ç
- Vanilla JavaScript
- Service Worker (PWA)
- WebRTC

### Desktop-–∫–ª–∏–µ–Ω—Ç
- Electron (Windows/Mac/Linux)
- Qt 6 (–Ω–∞—Ç–∏–≤–Ω—ã–π –∫–ª–∏–µ–Ω—Ç)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Node.js 18+
- PostgreSQL 14+
- npm –∏–ª–∏ yarn

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
git clone https://github.com/your-repo/kvant.git
cd kvant
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
npm install
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
cp .env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env`:
```env
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DATABASE_URL=postgresql://user:password@localhost:5432/kvant

# JWT —Å–µ–∫—Ä–µ—Ç (—Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–ª—É—á–∞–π–Ω—É—é —Å—Ç—Ä–æ–∫—É)
JWT_SECRET=your-super-secret-key-minimum-32-chars

# VAPID –∫–ª—é—á–∏ –¥–ª—è push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
# –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ: npx web-push generate-vapid-keys
VAPID_PUBLIC_KEY=
VAPID_PRIVATE_KEY=

# –û–∫—Ä—É–∂–µ–Ω–∏–µ
NODE_ENV=development
PORT=3000
```

### 4. –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```sql
CREATE DATABASE kvant;
```

–¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ.

### 5. –ó–∞–ø—É—Å–∫
```bash
npm start
```

–û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000

## Electron (Desktop)

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
```bash
npm run electron
```

### –°–±–æ—Ä–∫–∞
```bash
# Windows
npm run build:win

# macOS
npm run build:mac

# Linux
npm run build:linux
```

## Qt –∫–ª–∏–µ–Ω—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Qt 6.5+
- CMake 3.16+
- –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä C++17

### –°–±–æ—Ä–∫–∞
```bash
cd kvant-qt
mkdir build && cd build
cmake ..
cmake --build .
```

## API

### –ü—É–±–ª–∏—á–Ω—ã–µ endpoints

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| POST | /api/register | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è |
| POST | /api/login | –í—Ö–æ–¥ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JWT) |
| GET | /api/vapid-public-key | –ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –¥–ª—è push |

### –ó–∞—â–∏—â—ë–Ω–Ω—ã–µ endpoints (—Ç—Ä–µ–±—É—é—Ç JWT)

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| GET | /api/users?search= | –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |
| GET | /api/contacts/:userId | –ö–æ–Ω—Ç–∞–∫—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| GET | /api/user/:userId | –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| PUT | /api/user/:userId | –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å |
| PUT | /api/user/:userId/username | –°–º–µ–Ω–∏—Ç—å username |
| POST | /api/user/:userId/avatar | –ó–∞–≥—Ä—É–∑–∏—Ç—å –∞–≤–∞—Ç–∞—Ä |
| POST | /api/user/:userId/banner | –ó–∞–≥—Ä—É–∑–∏—Ç—å –±–∞–Ω–Ω–µ—Ä |
| GET | /api/messages/:otherId | –°–æ–æ–±—â–µ–Ω–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º |
| POST | /api/push-subscribe | –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ push |

### Socket.IO —Å–æ–±—ã—Ç–∏—è

**–ö–ª–∏–µ–Ω—Ç ‚Üí –°–µ—Ä–≤–µ—Ä:**
- `send-message` ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
- `typing-start` / `typing-stop` ‚Äî –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞–±–æ—Ä–∞
- `call-user` ‚Äî –Ω–∞—á–∞—Ç—å –∑–≤–æ–Ω–æ–∫
- `call-answer` ‚Äî –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –∑–≤–æ–Ω–æ–∫
- `call-decline` ‚Äî –æ—Ç–∫–ª–æ–Ω–∏—Ç—å –∑–≤–æ–Ω–æ–∫
- `call-end` ‚Äî –∑–∞–≤–µ—Ä—à–∏—Ç—å –∑–≤–æ–Ω–æ–∫
- `ice-candidate` ‚Äî ICE –∫–∞–Ω–¥–∏–¥–∞—Ç

**–°–µ—Ä–≤–µ—Ä ‚Üí –ö–ª–∏–µ–Ω—Ç:**
- `online-users` ‚Äî —Å–ø–∏—Å–æ–∫ –æ–Ω–ª–∞–π–Ω
- `new-message` ‚Äî –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- `message-sent` ‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
- `user-typing` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—á–∞—Ç–∞–µ—Ç
- `incoming-call` ‚Äî –≤—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫
- `call-answered` / `call-declined` / `call-ended`

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- JWT —Ç–æ–∫–µ–Ω—ã —Å –∏—Å—Ç–µ—á–µ–Ω–∏–µ–º 7 –¥–Ω–µ–π
- Bcrypt —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π (cost 12)
- Rate limiting –Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
- Helmet HTTP –∑–∞–≥–æ–ª–æ–≤–∫–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –ó–∞—â–∏—Ç–∞ –æ—Ç XSS

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
kvant/
‚îú‚îÄ‚îÄ server.js           # Express —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ database.js         # PostgreSQL
‚îú‚îÄ‚îÄ electron.js         # Electron main
‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îî‚îÄ‚îÄ auth.js         # JWT middleware
‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îú‚îÄ‚îÄ index.html      # Web UI
‚îÇ   ‚îú‚îÄ‚îÄ app.js          # –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π JS
‚îÇ   ‚îú‚îÄ‚îÄ style.css       # –°—Ç–∏–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ sw.js           # Service Worker
‚îÇ   ‚îî‚îÄ‚îÄ manifest.json   # PWA –º–∞–Ω–∏—Ñ–µ—Å—Ç
‚îî‚îÄ‚îÄ kvant-qt/           # Qt –∫–ª–∏–µ–Ω—Ç
    ‚îî‚îÄ‚îÄ src/
        ‚îú‚îÄ‚îÄ main.cpp
        ‚îú‚îÄ‚îÄ mainwindow.*
        ‚îú‚îÄ‚îÄ loginwidget.*
        ‚îú‚îÄ‚îÄ chatwidget.*
        ‚îú‚îÄ‚îÄ contactswidget.*
        ‚îú‚îÄ‚îÄ profilewidget.*
        ‚îú‚îÄ‚îÄ settingswidget.*
        ‚îú‚îÄ‚îÄ callwidget.*
        ‚îú‚îÄ‚îÄ models/
        ‚îî‚îÄ‚îÄ network/
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## –ê–≤—Ç–æ—Ä

–ö–≤–∞–Ω—Ç ¬© 2025
